"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./src/lib/firebase.ts":
/*!*****************************!*\
  !*** ./src/lib/firebase.ts ***!
  \*****************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FirebaseError: function() { return /* binding */ FirebaseError; },\n/* harmony export */   analytics: function() { return /* binding */ analytics; },\n/* harmony export */   app: function() { return /* binding */ app; },\n/* harmony export */   auth: function() { return /* binding */ auth; },\n/* harmony export */   batchDeleteStories: function() { return /* binding */ batchDeleteStories; },\n/* harmony export */   batchSaveStories: function() { return /* binding */ batchSaveStories; },\n/* harmony export */   createStoryWithStatus: function() { return /* binding */ createStoryWithStatus; },\n/* harmony export */   db: function() { return /* binding */ db; },\n/* harmony export */   ensureStoriesCollection: function() { return /* binding */ ensureStoriesCollection; },\n/* harmony export */   getStories: function() { return /* binding */ getStories; },\n/* harmony export */   getStoriesPaginated: function() { return /* binding */ getStoriesPaginated; },\n/* harmony export */   getStory: function() { return /* binding */ getStory; },\n/* harmony export */   getStoryGenerationStatus: function() { return /* binding */ getStoryGenerationStatus; },\n/* harmony export */   getStoryStats: function() { return /* binding */ getStoryStats; },\n/* harmony export */   saveStory: function() { return /* binding */ saveStory; },\n/* harmony export */   searchStories: function() { return /* binding */ searchStories; },\n/* harmony export */   storiesCollection: function() { return /* binding */ storiesCollection; },\n/* harmony export */   updateStory: function() { return /* binding */ updateStory; },\n/* harmony export */   updateStoryStatus: function() { return /* binding */ updateStoryStatus; }\n/* harmony export */ });\n/* harmony import */ var firebase_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/app */ \"(app-pages-browser)/./node_modules/firebase/app/dist/esm/index.esm.js\");\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/auth */ \"(app-pages-browser)/./node_modules/firebase/auth/dist/esm/index.esm.js\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var firebase_analytics__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! firebase/analytics */ \"(app-pages-browser)/./node_modules/firebase/analytics/dist/esm/index.esm.js\");\n/* __next_internal_client_entry_do_not_use__ storiesCollection,FirebaseError,getStories,ensureStoriesCollection,saveStory,updateStory,getStory,createStoryWithStatus,updateStoryStatus,getStoryGenerationStatus,batchSaveStories,batchDeleteStories,getStoriesPaginated,searchStories,getStoryStats,app,auth,db,analytics auto */ \n\n\n\n// Log environment variables for debugging\nconsole.log(\"Firebase Config:\", {\n    apiKey:  true ? \"Set\" : 0,\n    authDomain:  true ? \"Set\" : 0,\n    projectId:  true ? \"Set\" : 0,\n    storageBucket:  true ? \"Set\" : 0,\n    messagingSenderId:  true ? \"Set\" : 0,\n    appId:  true ? \"Set\" : 0,\n    measurementId:  true ? \"Set\" : 0\n});\nconst firebaseConfig = {\n    apiKey: \"AIzaSyAPjxc_Y70cfxyME-ao3WspK8PCeJaTR7k\",\n    authDomain: \"montajai.firebaseapp.com\",\n    projectId: \"montajai\",\n    storageBucket: \"montajai.firebasestorage.app\",\n    messagingSenderId: \"1074834137884\",\n    appId: \"1:1074834137884:web:acaa300a37b9dadc3e10d9\",\n    measurementId: \"G-HSZ6LZR8Q9\"\n};\n// Add connection status tracking\nlet isConnected = false;\n// Initialize Firebase with connection monitoring\nconst app = (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.getApps)().length ? (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.getApp)() : (0,firebase_app__WEBPACK_IMPORTED_MODULE_0__.initializeApp)(firebaseConfig);\nconst auth = (0,firebase_auth__WEBPACK_IMPORTED_MODULE_1__.getAuth)(app);\nconst db = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getFirestore)(app);\n// Enable offline persistence\nif (true) {\n    (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.enableIndexedDbPersistence)(db).catch((err)=>{\n        if (err.code === \"failed-precondition\") {\n            console.warn(\"Multiple tabs open, persistence can only be enabled in one tab at a time.\");\n        } else if (err.code === \"unimplemented\") {\n            console.warn(\"The current browser does not support persistence.\");\n        }\n    });\n}\n// Monitor connection status using onSnapshot\nconst connectionRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(db, \"_health\", \"connection\");\n(0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.onSnapshot)(connectionRef, ()=>{\n    isConnected = true;\n    console.log(\"Firebase connected successfully\");\n}, (error)=>{\n    console.error(\"Firebase connection error:\", error);\n    isConnected = false;\n});\n// Connection status check function\nconst checkConnection = async ()=>{\n    if (!isConnected) {\n        try {\n            // Try a simple read operation to check connection\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDoc)(connectionRef);\n            isConnected = true;\n            return true;\n        } catch (error) {\n            console.error(\"Failed to establish connection:\", error);\n            return false;\n        }\n    }\n    return true;\n};\n// Retry utility function\nconst withRetry = async function(operation) {\n    let maxRetries = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 3, delay = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 1000;\n    let lastError = null;\n    for(let attempt = 1; attempt <= maxRetries; attempt++){\n        try {\n            // Check connection before each attempt\n            if (!await checkConnection()) {\n                throw new Error(\"No connection to Firebase\");\n            }\n            return await operation();\n        } catch (error) {\n            lastError = error;\n            console.warn(\"Attempt \".concat(attempt, \" failed:\"), error);\n            if (attempt < maxRetries) {\n                // Exponential backoff\n                const backoffDelay = delay * Math.pow(2, attempt - 1);\n                await new Promise((resolve)=>setTimeout(resolve, backoffDelay));\n            }\n        }\n    }\n    throw lastError;\n};\n// Enhanced error logging\nconst logError = (operation, error, context)=>{\n    const errorDetails = {\n        timestamp: new Date().toISOString(),\n        operation,\n        error: error instanceof Error ? {\n            name: error.name,\n            message: error.message,\n            stack: error.stack,\n            code: \"code\" in error ? error.code : undefined\n        } : error,\n        context,\n        connectionStatus: isConnected\n    };\n    console.error(\"Firebase Operation Error:\", errorDetails);\n    return errorDetails;\n};\nlet analytics;\ntry {\n    // Initialize Analytics only in browser environment\n    if (true) {\n        analytics = (0,firebase_analytics__WEBPACK_IMPORTED_MODULE_3__.getAnalytics)(app);\n    }\n    console.log(\"Firebase initialized successfully\");\n} catch (error) {\n    console.error(\"Error initializing Firebase:\", error);\n    throw error;\n}\n// Initialize collections\nconst storiesCollection = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(db, \"stories\");\n// Custom error types for better error handling\nclass FirebaseError extends Error {\n    constructor(message, code, status = 500){\n        super(message);\n        this.code = code;\n        this.status = status;\n        this.name = \"FirebaseError\";\n    }\n}\n// Enhanced validation function\nconst validateStory = (story)=>{\n    var _story_title, _story_content, _story_userId;\n    const errors = [];\n    // Required fields validation\n    if (!((_story_title = story.title) === null || _story_title === void 0 ? void 0 : _story_title.trim())) errors.push(\"Title is required\");\n    if (!((_story_content = story.content) === null || _story_content === void 0 ? void 0 : _story_content.trim())) errors.push(\"Content is required\");\n    if (!((_story_userId = story.userId) === null || _story_userId === void 0 ? void 0 : _story_userId.trim())) errors.push(\"User ID is required\");\n    // Config validation\n    if (!story.config) {\n        errors.push(\"Configuration is required\");\n    } else {\n        const { focus, tone, format, length } = story.config;\n        if (!(focus === null || focus === void 0 ? void 0 : focus.trim())) errors.push(\"Focus is required\");\n        if (!(tone === null || tone === void 0 ? void 0 : tone.trim())) errors.push(\"Tone is required\");\n        if (!(format === null || format === void 0 ? void 0 : format.trim())) errors.push(\"Format is required\");\n        if (!(length === null || length === void 0 ? void 0 : length.trim())) errors.push(\"Length is required\");\n    }\n    // Status validation\n    if (!story.status || ![\n        \"completed\",\n        \"in_progress\",\n        \"failed\"\n    ].includes(story.status)) {\n        errors.push(\"Invalid status\");\n    }\n    // Content length validation\n    if (story.content.length < 50) {\n        errors.push(\"Content must be at least 50 characters long\");\n    }\n    if (errors.length > 0) {\n        throw new FirebaseError(errors.join(\", \"), \"INVALID_DATA\", 400);\n    }\n};\n// Function to get stories for the current user\nconst getStories = async ()=>{\n    return withRetry(async ()=>{\n        try {\n            const user = auth.currentUser;\n            if (!user) {\n                throw new FirebaseError(\"User must be authenticated to fetch stories\", \"UNAUTHENTICATED\", 401);\n            }\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)(storiesCollection, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", user.uid), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.orderBy)(\"createdAt\", \"desc\"));\n            const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(q);\n            return querySnapshot.docs.map((doc)=>({\n                    id: doc.id,\n                    ...doc.data()\n                }));\n        } catch (error) {\n            var _auth_currentUser;\n            logError(\"getStories\", error, {\n                userId: (_auth_currentUser = auth.currentUser) === null || _auth_currentUser === void 0 ? void 0 : _auth_currentUser.uid\n            });\n            if (error instanceof FirebaseError) {\n                throw error;\n            }\n            throw new FirebaseError(\"Failed to fetch stories. Please try again later.\", \"FETCH_ERROR\", 500);\n        }\n    });\n};\n// Check if Stories collection exists and create it if it doesn't\nconst ensureStoriesCollection = async ()=>{\n    try {\n        // Try to get a document from the collection\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)(storiesCollection, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.limit)(1));\n        const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(q);\n        if (!querySnapshot.empty) {\n            console.log(\"Stories collection exists\");\n            return true;\n        }\n        // If collection is empty, create a dummy document to ensure collection exists\n        const dummyDoc = {\n            title: \"Dummy Story\",\n            content: \"This is a dummy story to initialize the collection\",\n            config: {\n                focus: \"dummy\",\n                tone: \"dummy\",\n                format: \"dummy\",\n                length: \"dummy\"\n            },\n            userId: \"system\",\n            status: \"completed\",\n            createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)(),\n            updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)(),\n            generationAttempts: 0,\n            lastAttemptAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)(),\n            storyStyle: \"dummy\",\n            acStyle: \"dummy\"\n        };\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.addDoc)(storiesCollection, dummyDoc);\n        console.log(\"Stories collection created\");\n        return true;\n    } catch (error) {\n        console.error(\"Error checking/creating Stories collection:\", error);\n        throw new FirebaseError(\"Failed to initialize Stories collection\", \"INIT_ERROR\", 500);\n    }\n};\n// Update saveStory to ensure collection exists\nconst saveStory = async (story)=>{\n    return withRetry(async ()=>{\n        try {\n            const user = auth.currentUser;\n            if (!user) {\n                throw new FirebaseError(\"User must be authenticated to save stories\", \"UNAUTHENTICATED\", 401);\n            }\n            // Ensure Stories collection exists\n            await ensureStoriesCollection();\n            validateStory(story);\n            const storyData = {\n                ...story,\n                userId: user.uid,\n                createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)(),\n                updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)(),\n                status: \"completed\",\n                generationAttempts: 0,\n                lastAttemptAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)()\n            };\n            const docRef = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.addDoc)(storiesCollection, storyData);\n            return docRef.id;\n        } catch (error) {\n            var _auth_currentUser;\n            logError(\"saveStory\", error, {\n                userId: (_auth_currentUser = auth.currentUser) === null || _auth_currentUser === void 0 ? void 0 : _auth_currentUser.uid,\n                storyTitle: story.title,\n                storyConfig: story.config\n            });\n            if (error instanceof Error) {\n                if (\"code\" in error) {\n                    const firebaseError = error;\n                    switch(firebaseError.code){\n                        case \"permission-denied\":\n                            throw new FirebaseError(\"Permission denied. Please check your authentication status.\", \"PERMISSION_DENIED\", 403);\n                        case \"unauthenticated\":\n                            throw new FirebaseError(\"Please sign in to save stories.\", \"UNAUTHENTICATED\", 401);\n                        case \"invalid-argument\":\n                            throw new FirebaseError(\"Invalid story data provided.\", \"INVALID_DATA\", 400);\n                        case \"failed-precondition\":\n                            throw new FirebaseError(\"Operation failed. Please try again.\", \"FAILED_PRECONDITION\", 400);\n                        case \"unavailable\":\n                            throw new FirebaseError(\"Service temporarily unavailable. Please try again.\", \"UNAVAILABLE\", 503);\n                        default:\n                            throw new FirebaseError(\"Failed to save story. Please try again.\", \"SAVE_ERROR\", 500);\n                    }\n                }\n            }\n            throw new FirebaseError(\"Failed to save story. Please try again.\", \"SAVE_ERROR\", 500);\n        }\n    });\n};\n// Function to update a story\nconst updateStory = async (storyId, updates)=>{\n    try {\n        const user = auth.currentUser;\n        if (!user) {\n            throw new FirebaseError(\"User must be authenticated to update stories\", \"UNAUTHENTICATED\", 401);\n        }\n        // Get the existing story to verify ownership\n        const storyRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(db, \"stories\", storyId);\n        const storySnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDoc)(storyRef);\n        if (!storySnap.exists()) {\n            throw new FirebaseError(\"Story not found\", \"NOT_FOUND\", 404);\n        }\n        const storyData = storySnap.data();\n        if (storyData.userId !== user.uid) {\n            throw new FirebaseError(\"Unauthorized to update this story\", \"UNAUTHORIZED\", 403);\n        }\n        // Validate the updated data\n        const updatedStory = {\n            ...storyData,\n            ...updates\n        };\n        validateStory(updatedStory);\n        // Update the story\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)(storyRef, {\n            ...updates,\n            updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)()\n        });\n        return storyId;\n    } catch (error) {\n        if (error instanceof FirebaseError) {\n            throw error;\n        }\n        console.error(\"Error updating story:\", error);\n        throw new FirebaseError(\"Failed to update story\", \"UPDATE_ERROR\", error instanceof Error && \"code\" in error ? 500 : 500);\n    }\n};\n// Function to get a single story\nconst getStory = async (storyId)=>{\n    try {\n        const user = auth.currentUser;\n        if (!user) {\n            throw new FirebaseError(\"User must be authenticated to get stories\", \"UNAUTHENTICATED\", 401);\n        }\n        const storyDoc = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(db, \"stories\", storyId));\n        if (!storyDoc.exists()) {\n            throw new FirebaseError(\"Story not found\", \"NOT_FOUND\", 404);\n        }\n        const storyData = storyDoc.data();\n        if (storyData.userId !== user.uid) {\n            throw new FirebaseError(\"Unauthorized to access this story\", \"UNAUTHORIZED\", 403);\n        }\n        return {\n            id: storyDoc.id,\n            ...storyData\n        };\n    } catch (error) {\n        if (error instanceof FirebaseError) {\n            throw error;\n        }\n        console.error(\"Error getting story:\", error);\n        throw new FirebaseError(\"Failed to get story\", \"FETCH_ERROR\", error instanceof Error && \"code\" in error ? 500 : 500);\n    }\n};\n// Function to create a story with initial status and error tracking\nconst createStoryWithStatus = async function(story) {\n    let status = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : \"in_progress\", error = arguments.length > 2 ? arguments[2] : void 0;\n    try {\n        const user = auth.currentUser;\n        if (!user) {\n            throw new FirebaseError(\"User must be authenticated to create stories\", \"UNAUTHENTICATED\", 401);\n        }\n        // Create initial story document with error tracking\n        const docRef = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.addDoc)(storiesCollection, {\n            ...story,\n            userId: user.uid,\n            status,\n            createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)(),\n            error: error ? {\n                ...error,\n                timestamp: new Date().toISOString()\n            } : null,\n            generationAttempts: 0,\n            lastAttemptAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)()\n        });\n        return docRef.id;\n    } catch (error) {\n        if (error instanceof FirebaseError) {\n            throw error;\n        }\n        console.error(\"Error creating story:\", error);\n        throw new FirebaseError(\"Failed to create story\", \"CREATE_ERROR\", error instanceof Error && \"code\" in error ? 500 : 500);\n    }\n};\n// Function to update story generation status with detailed error tracking\nconst updateStoryStatus = async (storyId, status, error)=>{\n    try {\n        const user = auth.currentUser;\n        if (!user) {\n            throw new FirebaseError(\"User must be authenticated to update story status\", \"UNAUTHENTICATED\", 401);\n        }\n        const storyRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(db, \"stories\", storyId);\n        const storySnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDoc)(storyRef);\n        if (!storySnap.exists()) {\n            throw new FirebaseError(\"Story not found\", \"NOT_FOUND\", 404);\n        }\n        const storyData = storySnap.data();\n        if (storyData.userId !== user.uid) {\n            throw new FirebaseError(\"Unauthorized to update this story\", \"UNAUTHORIZED\", 403);\n        }\n        const updates = {\n            status,\n            updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)(),\n            lastAttemptAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)()\n        };\n        if (error) {\n            updates.error = {\n                ...error,\n                timestamp: new Date().toISOString()\n            };\n            updates.generationAttempts = (storyData.generationAttempts || 0) + 1;\n        }\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)(storyRef, updates);\n        return storyId;\n    } catch (error) {\n        if (error instanceof FirebaseError) {\n            throw error;\n        }\n        console.error(\"Error updating story status:\", error);\n        throw new FirebaseError(\"Failed to update story status\", \"UPDATE_ERROR\", error instanceof Error && \"code\" in error ? 500 : 500);\n    }\n};\n// Function to get story generation status\nconst getStoryGenerationStatus = async (storyId)=>{\n    try {\n        const user = auth.currentUser;\n        if (!user) {\n            throw new FirebaseError(\"User must be authenticated to get story status\", \"UNAUTHENTICATED\", 401);\n        }\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(db, \"stories\", storyId);\n        const docSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDoc)(docRef);\n        if (!docSnap.exists()) {\n            throw new FirebaseError(\"Story not found\", \"NOT_FOUND\", 404);\n        }\n        const storyData = docSnap.data();\n        if (storyData.userId !== user.uid) {\n            throw new FirebaseError(\"Unauthorized to access this story\", \"UNAUTHORIZED\", 403);\n        }\n        return {\n            status: storyData.status,\n            error: storyData.error,\n            generationAttempts: storyData.generationAttempts || 0,\n            lastAttemptAt: storyData.lastAttemptAt\n        };\n    } catch (error) {\n        if (error instanceof FirebaseError) {\n            throw error;\n        }\n        console.error(\"Error getting story status:\", error);\n        throw new FirebaseError(\"Failed to get story status\", \"FETCH_ERROR\", error instanceof Error && \"code\" in error ? 500 : 500);\n    }\n};\n// Batch operations\nconst batchSaveStories = async (stories)=>{\n    try {\n        const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.writeBatch)(db);\n        const storyIds = [];\n        stories.forEach((story)=>{\n            validateStory(story);\n            const storyRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(db, \"stories\"));\n            batch.set(storyRef, {\n                ...story,\n                createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)(),\n                status: \"completed\"\n            });\n            storyIds.push(storyRef.id);\n        });\n        await batch.commit();\n        return storyIds;\n    } catch (error) {\n        console.error(\"Error batch saving stories:\", error);\n        throw new Error(\"Failed to batch save stories\");\n    }\n};\nconst batchDeleteStories = async (storyIds)=>{\n    try {\n        const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.writeBatch)(db);\n        storyIds.forEach((id)=>{\n            const storyRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(db, \"stories\", id);\n            batch.delete(storyRef);\n        });\n        await batch.commit();\n    } catch (error) {\n        console.error(\"Error batch deleting stories:\", error);\n        throw new Error(\"Failed to batch delete stories\");\n    }\n};\n// Pagination support\nconst getStoriesPaginated = async function(userId) {\n    let pageSize = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 10, lastDoc = arguments.length > 2 ? arguments[2] : void 0;\n    try {\n        let q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(db, \"stories\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", userId), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.orderBy)(\"createdAt\", \"desc\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.limit)(pageSize));\n        if (lastDoc) {\n            q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)(q, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.startAfter)(lastDoc));\n        }\n        const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(q);\n        const stories = querySnapshot.docs.map((doc)=>({\n                id: doc.id,\n                ...doc.data()\n            }));\n        return {\n            stories,\n            lastDoc: querySnapshot.docs[querySnapshot.docs.length - 1] || null\n        };\n    } catch (error) {\n        console.error(\"Error getting paginated stories:\", error);\n        throw new Error(\"Failed to get paginated stories\");\n    }\n};\n// Search stories\nconst searchStories = async (userId, searchTerm)=>{\n    try {\n        const storiesQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(db, \"stories\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", userId), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.orderBy)(\"createdAt\", \"desc\"));\n        const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(storiesQuery);\n        const stories = querySnapshot.docs.map((doc)=>({\n                id: doc.id,\n                ...doc.data()\n            }));\n        // Client-side search for better flexibility\n        return stories.filter((story)=>story.title.toLowerCase().includes(searchTerm.toLowerCase()) || story.content.toLowerCase().includes(searchTerm.toLowerCase()) || story.config.focus.toLowerCase().includes(searchTerm.toLowerCase()) || story.config.tone.toLowerCase().includes(searchTerm.toLowerCase()));\n    } catch (error) {\n        console.error(\"Error searching stories:\", error);\n        throw new Error(\"Failed to search stories\");\n    }\n};\n// Story statistics\nconst getStoryStats = async (userId)=>{\n    try {\n        const storiesQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(db, \"stories\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.where)(\"userId\", \"==\", userId));\n        const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDocs)(storiesQuery);\n        const stories = querySnapshot.docs.map((doc)=>doc.data());\n        const stats = {\n            total: stories.length,\n            completed: 0,\n            inProgress: 0,\n            failed: 0,\n            byFocus: {},\n            byTone: {}\n        };\n        stories.forEach((story)=>{\n            // Count by status\n            stats[story.status]++;\n            // Count by focus\n            stats.byFocus[story.config.focus] = (stats.byFocus[story.config.focus] || 0) + 1;\n            // Count by tone\n            stats.byTone[story.config.tone] = (stats.byTone[story.config.tone] || 0) + 1;\n        });\n        return stats;\n    } catch (error) {\n        console.error(\"Error getting story stats:\", error);\n        throw new Error(\"Failed to get story statistics\");\n    }\n};\n\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvZmlyZWJhc2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7a1VBRThEO0FBQ3RCO0FBQzJNO0FBQ2pNO0FBR2xELDBDQUEwQztBQUMxQ3FCLFFBQVFDLEdBQUcsQ0FBQyxvQkFBb0I7SUFDOUJDLFFBQVFDLEtBQXdDLEdBQUcsUUFBUTtJQUMzREcsWUFBWUgsS0FBNEMsR0FBRyxRQUFRO0lBQ25FSyxXQUFXTCxLQUEyQyxHQUFHLFFBQVE7SUFDakVPLGVBQWVQLEtBQStDLEdBQUcsUUFBUTtJQUN6RVMsbUJBQW1CVCxLQUFvRCxHQUFHLFFBQVE7SUFDbEZXLE9BQU9YLEtBQXVDLEdBQUcsUUFBUTtJQUN6RGEsZUFBZWIsS0FBK0MsR0FBRyxRQUFRO0FBQzNFO0FBRUEsTUFBTWUsaUJBQWlCO0lBQ3JCaEIsUUFBUUMseUNBQXdDO0lBQ2hERyxZQUFZSCwwQkFBNEM7SUFDeERLLFdBQVdMLFVBQTJDO0lBQ3RETyxlQUFlUCw4QkFBK0M7SUFDOURTLG1CQUFtQlQsZUFBb0Q7SUFDdkVXLE9BQU9YLDRDQUF1QztJQUM5Q2EsZUFBZWIsY0FBK0M7QUFDaEU7QUFFQSxpQ0FBaUM7QUFDakMsSUFBSWdCLGNBQWM7QUFFbEIsaURBQWlEO0FBQ2pELE1BQU1DLE1BQU14QyxxREFBT0EsR0FBR3lDLE1BQU0sR0FBR3hDLG9EQUFNQSxLQUFLRiwyREFBYUEsQ0FBQ3VDO0FBQ3hELE1BQU1JLE9BQU94QyxzREFBT0EsQ0FBQ3NDO0FBQ3JCLE1BQU1HLEtBQUt4QyxnRUFBWUEsQ0FBQ3FDO0FBRXhCLDZCQUE2QjtBQUM3QixJQUFJLElBQWtCLEVBQWE7SUFDakN0Qiw4RUFBMEJBLENBQUN5QixJQUFJQyxLQUFLLENBQUMsQ0FBQ0M7UUFDcEMsSUFBSUEsSUFBSUMsSUFBSSxLQUFLLHVCQUF1QjtZQUN0QzFCLFFBQVEyQixJQUFJLENBQUM7UUFDZixPQUFPLElBQUlGLElBQUlDLElBQUksS0FBSyxp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LCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmltcG9ydCB7IGluaXRpYWxpemVBcHAsIGdldEFwcHMsIGdldEFwcCB9IGZyb20gJ2ZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBnZXRBdXRoIH0gZnJvbSAnZmlyZWJhc2UvYXV0aCc7XG5pbXBvcnQgeyBnZXRGaXJlc3RvcmUsIGNvbGxlY3Rpb24sIGFkZERvYywgc2VydmVyVGltZXN0YW1wLCBxdWVyeSwgd2hlcmUsIG9yZGVyQnksIGdldERvY3MsIGRvYywgZ2V0RG9jLCB1cGRhdGVEb2MsIHdyaXRlQmF0Y2gsIGRlbGV0ZURvYywgbGltaXQsIHN0YXJ0QWZ0ZXIsIERvY3VtZW50U25hcHNob3QsIG9uU25hcHNob3QsIGVuYWJsZUluZGV4ZWREYlBlcnNpc3RlbmNlIH0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcbmltcG9ydCB7IGdldEFuYWx5dGljcyB9IGZyb20gJ2ZpcmViYXNlL2FuYWx5dGljcyc7XG5pbXBvcnQgeyBUaW1lc3RhbXAgfSBmcm9tICdmaXJlYmFzZS9maXJlc3RvcmUnO1xuXG4vLyBMb2cgZW52aXJvbm1lbnQgdmFyaWFibGVzIGZvciBkZWJ1Z2dpbmdcbmNvbnNvbGUubG9nKCdGaXJlYmFzZSBDb25maWc6Jywge1xuICBhcGlLZXk6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FQSV9LRVkgPyAnU2V0JyA6ICdOb3QgU2V0JyxcbiAgYXV0aERvbWFpbjogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfRklSRUJBU0VfQVVUSF9ET01BSU4gPyAnU2V0JyA6ICdOb3QgU2V0JyxcbiAgcHJvamVjdElkOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19GSVJFQkFTRV9QUk9KRUNUX0lEID8gJ1NldCcgOiAnTm90IFNldCcsXG4gIHN0b3JhZ2VCdWNrZXQ6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX1NUT1JBR0VfQlVDS0VUID8gJ1NldCcgOiAnTm90IFNldCcsXG4gIG1lc3NhZ2luZ1NlbmRlcklkOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19GSVJFQkFTRV9NRVNTQUdJTkdfU0VOREVSX0lEID8gJ1NldCcgOiAnTm90IFNldCcsXG4gIGFwcElkOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19GSVJFQkFTRV9BUFBfSUQgPyAnU2V0JyA6ICdOb3QgU2V0JyxcbiAgbWVhc3VyZW1lbnRJZDogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfRklSRUJBU0VfTUVBU1VSRU1FTlRfSUQgPyAnU2V0JyA6ICdOb3QgU2V0J1xufSk7XG5cbmNvbnN0IGZpcmViYXNlQ29uZmlnID0ge1xuICBhcGlLZXk6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FQSV9LRVksXG4gIGF1dGhEb21haW46IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FVVEhfRE9NQUlOLFxuICBwcm9qZWN0SWQ6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX1BST0pFQ1RfSUQsXG4gIHN0b3JhZ2VCdWNrZXQ6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX1NUT1JBR0VfQlVDS0VULFxuICBtZXNzYWdpbmdTZW5kZXJJZDogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfRklSRUJBU0VfTUVTU0FHSU5HX1NFTkRFUl9JRCxcbiAgYXBwSWQ6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FQUF9JRCxcbiAgbWVhc3VyZW1lbnRJZDogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfRklSRUJBU0VfTUVBU1VSRU1FTlRfSURcbn07XG5cbi8vIEFkZCBjb25uZWN0aW9uIHN0YXR1cyB0cmFja2luZ1xubGV0IGlzQ29ubmVjdGVkID0gZmFsc2U7XG5cbi8vIEluaXRpYWxpemUgRmlyZWJhc2Ugd2l0aCBjb25uZWN0aW9uIG1vbml0b3JpbmdcbmNvbnN0IGFwcCA9IGdldEFwcHMoKS5sZW5ndGggPyBnZXRBcHAoKSA6IGluaXRpYWxpemVBcHAoZmlyZWJhc2VDb25maWcpO1xuY29uc3QgYXV0aCA9IGdldEF1dGgoYXBwKTtcbmNvbnN0IGRiID0gZ2V0RmlyZXN0b3JlKGFwcCk7XG5cbi8vIEVuYWJsZSBvZmZsaW5lIHBlcnNpc3RlbmNlXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgZW5hYmxlSW5kZXhlZERiUGVyc2lzdGVuY2UoZGIpLmNhdGNoKChlcnIpID0+IHtcbiAgICBpZiAoZXJyLmNvZGUgPT09ICdmYWlsZWQtcHJlY29uZGl0aW9uJykge1xuICAgICAgY29uc29sZS53YXJuKCdNdWx0aXBsZSB0YWJzIG9wZW4sIHBlcnNpc3RlbmNlIGNhbiBvbmx5IGJlIGVuYWJsZWQgaW4gb25lIHRhYiBhdCBhIHRpbWUuJyk7XG4gICAgfSBlbHNlIGlmIChlcnIuY29kZSA9PT0gJ3VuaW1wbGVtZW50ZWQnKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1RoZSBjdXJyZW50IGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBwZXJzaXN0ZW5jZS4nKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vLyBNb25pdG9yIGNvbm5lY3Rpb24gc3RhdHVzIHVzaW5nIG9uU25hcHNob3RcbmNvbnN0IGNvbm5lY3Rpb25SZWYgPSBkb2MoZGIsICdfaGVhbHRoJywgJ2Nvbm5lY3Rpb24nKTtcbm9uU25hcHNob3QoY29ubmVjdGlvblJlZiwgXG4gICgpID0+IHtcbiAgICBpc0Nvbm5lY3RlZCA9IHRydWU7XG4gICAgY29uc29sZS5sb2coJ0ZpcmViYXNlIGNvbm5lY3RlZCBzdWNjZXNzZnVsbHknKTtcbiAgfSxcbiAgKGVycm9yKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcignRmlyZWJhc2UgY29ubmVjdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgaXNDb25uZWN0ZWQgPSBmYWxzZTtcbiAgfVxuKTtcblxuLy8gQ29ubmVjdGlvbiBzdGF0dXMgY2hlY2sgZnVuY3Rpb25cbmNvbnN0IGNoZWNrQ29ubmVjdGlvbiA9IGFzeW5jICgpOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgaWYgKCFpc0Nvbm5lY3RlZCkge1xuICAgIHRyeSB7XG4gICAgICAvLyBUcnkgYSBzaW1wbGUgcmVhZCBvcGVyYXRpb24gdG8gY2hlY2sgY29ubmVjdGlvblxuICAgICAgYXdhaXQgZ2V0RG9jKGNvbm5lY3Rpb25SZWYpO1xuICAgICAgaXNDb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBlc3RhYmxpc2ggY29ubmVjdGlvbjonLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufTtcblxuLy8gUmV0cnkgdXRpbGl0eSBmdW5jdGlvblxuY29uc3Qgd2l0aFJldHJ5ID0gYXN5bmMgPFQ+KFxuICBvcGVyYXRpb246ICgpID0+IFByb21pc2U8VD4sXG4gIG1heFJldHJpZXM6IG51bWJlciA9IDMsXG4gIGRlbGF5OiBudW1iZXIgPSAxMDAwXG4pOiBQcm9taXNlPFQ+ID0+IHtcbiAgbGV0IGxhc3RFcnJvcjogRXJyb3IgfCBudWxsID0gbnVsbDtcbiAgXG4gIGZvciAobGV0IGF0dGVtcHQgPSAxOyBhdHRlbXB0IDw9IG1heFJldHJpZXM7IGF0dGVtcHQrKykge1xuICAgIHRyeSB7XG4gICAgICAvLyBDaGVjayBjb25uZWN0aW9uIGJlZm9yZSBlYWNoIGF0dGVtcHRcbiAgICAgIGlmICghYXdhaXQgY2hlY2tDb25uZWN0aW9uKCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBjb25uZWN0aW9uIHRvIEZpcmViYXNlJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBhd2FpdCBvcGVyYXRpb24oKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbGFzdEVycm9yID0gZXJyb3IgYXMgRXJyb3I7XG4gICAgICBjb25zb2xlLndhcm4oYEF0dGVtcHQgJHthdHRlbXB0fSBmYWlsZWQ6YCwgZXJyb3IpO1xuICAgICAgXG4gICAgICBpZiAoYXR0ZW1wdCA8IG1heFJldHJpZXMpIHtcbiAgICAgICAgLy8gRXhwb25lbnRpYWwgYmFja29mZlxuICAgICAgICBjb25zdCBiYWNrb2ZmRGVsYXkgPSBkZWxheSAqIE1hdGgucG93KDIsIGF0dGVtcHQgLSAxKTtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGJhY2tvZmZEZWxheSkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBcbiAgdGhyb3cgbGFzdEVycm9yO1xufTtcblxuLy8gRW5oYW5jZWQgZXJyb3IgbG9nZ2luZ1xuY29uc3QgbG9nRXJyb3IgPSAob3BlcmF0aW9uOiBzdHJpbmcsIGVycm9yOiBhbnksIGNvbnRleHQ/OiBhbnkpID0+IHtcbiAgY29uc3QgZXJyb3JEZXRhaWxzID0ge1xuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIG9wZXJhdGlvbixcbiAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IHtcbiAgICAgIG5hbWU6IGVycm9yLm5hbWUsXG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgc3RhY2s6IGVycm9yLnN0YWNrLFxuICAgICAgY29kZTogJ2NvZGUnIGluIGVycm9yID8gKGVycm9yIGFzIGFueSkuY29kZSA6IHVuZGVmaW5lZFxuICAgIH0gOiBlcnJvcixcbiAgICBjb250ZXh0LFxuICAgIGNvbm5lY3Rpb25TdGF0dXM6IGlzQ29ubmVjdGVkXG4gIH07XG4gIFxuICBjb25zb2xlLmVycm9yKCdGaXJlYmFzZSBPcGVyYXRpb24gRXJyb3I6JywgZXJyb3JEZXRhaWxzKTtcbiAgcmV0dXJuIGVycm9yRGV0YWlscztcbn07XG5cbmxldCBhbmFseXRpY3M7XG5cbnRyeSB7XG4gIC8vIEluaXRpYWxpemUgQW5hbHl0aWNzIG9ubHkgaW4gYnJvd3NlciBlbnZpcm9ubWVudFxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBhbmFseXRpY3MgPSBnZXRBbmFseXRpY3MoYXBwKTtcbiAgfVxuICBjb25zb2xlLmxvZygnRmlyZWJhc2UgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG59IGNhdGNoIChlcnJvcikge1xuICBjb25zb2xlLmVycm9yKCdFcnJvciBpbml0aWFsaXppbmcgRmlyZWJhc2U6JywgZXJyb3IpO1xuICB0aHJvdyBlcnJvcjtcbn1cblxuLy8gSW5pdGlhbGl6ZSBjb2xsZWN0aW9uc1xuZXhwb3J0IGNvbnN0IHN0b3JpZXNDb2xsZWN0aW9uID0gY29sbGVjdGlvbihkYiwgJ3N0b3JpZXMnKTtcblxuZXhwb3J0IGludGVyZmFjZSBTdG9yeUNvbmZpZyB7XG4gIGluZHVzdHJ5OiBzdHJpbmc7XG4gIGNvbXBhbnlTaXplOiBzdHJpbmc7XG4gIHJvbGU6IHN0cmluZztcbiAgZXhwZXJpZW5jZTogc3RyaW5nO1xuICBmb2N1czogc3RyaW5nO1xuICB0b25lOiBzdHJpbmc7XG4gIGZvcm1hdDogc3RyaW5nO1xuICBsZW5ndGg6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdG9yeSB7XG4gIGlkPzogc3RyaW5nO1xuICB0aXRsZTogc3RyaW5nO1xuICBjb250ZW50OiBzdHJpbmc7XG4gIGNvbmZpZzogU3RvcnlDb25maWc7XG4gIHVzZXJJZDogc3RyaW5nO1xuICBzdGF0dXM6ICdjb21wbGV0ZWQnIHwgJ2luX3Byb2dyZXNzJyB8ICdmYWlsZWQnO1xuICBjcmVhdGVkQXQ6IFRpbWVzdGFtcDtcbiAgZXJyb3I/OiBTdG9yeUdlbmVyYXRpb25FcnJvcjtcbiAgZ2VuZXJhdGlvbkF0dGVtcHRzPzogbnVtYmVyO1xuICBsYXN0QXR0ZW1wdEF0PzogYW55O1xuICBzdG9yeVN0eWxlOiBzdHJpbmc7XG4gIGFjU3R5bGU6IHN0cmluZztcbn1cblxuLy8gQ3VzdG9tIGVycm9yIHR5cGVzIGZvciBiZXR0ZXIgZXJyb3IgaGFuZGxpbmdcbmV4cG9ydCBjbGFzcyBGaXJlYmFzZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihcbiAgICBtZXNzYWdlOiBzdHJpbmcsXG4gICAgcHVibGljIGNvZGU6IHN0cmluZyxcbiAgICBwdWJsaWMgc3RhdHVzOiBudW1iZXIgPSA1MDBcbiAgKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5uYW1lID0gJ0ZpcmViYXNlRXJyb3InO1xuICB9XG59XG5cbi8vIEVuaGFuY2VkIHZhbGlkYXRpb24gZnVuY3Rpb25cbmNvbnN0IHZhbGlkYXRlU3RvcnkgPSAoc3Rvcnk6IE9taXQ8U3RvcnksICdpZCcgfCAnY3JlYXRlZEF0Jz4pID0+IHtcbiAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIC8vIFJlcXVpcmVkIGZpZWxkcyB2YWxpZGF0aW9uXG4gIGlmICghc3RvcnkudGl0bGU/LnRyaW0oKSkgZXJyb3JzLnB1c2goJ1RpdGxlIGlzIHJlcXVpcmVkJyk7XG4gIGlmICghc3RvcnkuY29udGVudD8udHJpbSgpKSBlcnJvcnMucHVzaCgnQ29udGVudCBpcyByZXF1aXJlZCcpO1xuICBpZiAoIXN0b3J5LnVzZXJJZD8udHJpbSgpKSBlcnJvcnMucHVzaCgnVXNlciBJRCBpcyByZXF1aXJlZCcpO1xuXG4gIC8vIENvbmZpZyB2YWxpZGF0aW9uXG4gIGlmICghc3RvcnkuY29uZmlnKSB7XG4gICAgZXJyb3JzLnB1c2goJ0NvbmZpZ3VyYXRpb24gaXMgcmVxdWlyZWQnKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCB7IGZvY3VzLCB0b25lLCBmb3JtYXQsIGxlbmd0aCB9ID0gc3RvcnkuY29uZmlnO1xuICAgIGlmICghZm9jdXM/LnRyaW0oKSkgZXJyb3JzLnB1c2goJ0ZvY3VzIGlzIHJlcXVpcmVkJyk7XG4gICAgaWYgKCF0b25lPy50cmltKCkpIGVycm9ycy5wdXNoKCdUb25lIGlzIHJlcXVpcmVkJyk7XG4gICAgaWYgKCFmb3JtYXQ/LnRyaW0oKSkgZXJyb3JzLnB1c2goJ0Zvcm1hdCBpcyByZXF1aXJlZCcpO1xuICAgIGlmICghbGVuZ3RoPy50cmltKCkpIGVycm9ycy5wdXNoKCdMZW5ndGggaXMgcmVxdWlyZWQnKTtcbiAgfVxuXG4gIC8vIFN0YXR1cyB2YWxpZGF0aW9uXG4gIGlmICghc3Rvcnkuc3RhdHVzIHx8ICFbJ2NvbXBsZXRlZCcsICdpbl9wcm9ncmVzcycsICdmYWlsZWQnXS5pbmNsdWRlcyhzdG9yeS5zdGF0dXMpKSB7XG4gICAgZXJyb3JzLnB1c2goJ0ludmFsaWQgc3RhdHVzJyk7XG4gIH1cblxuICAvLyBDb250ZW50IGxlbmd0aCB2YWxpZGF0aW9uXG4gIGlmIChzdG9yeS5jb250ZW50Lmxlbmd0aCA8IDUwKSB7XG4gICAgZXJyb3JzLnB1c2goJ0NvbnRlbnQgbXVzdCBiZSBhdCBsZWFzdCA1MCBjaGFyYWN0ZXJzIGxvbmcnKTtcbiAgfVxuXG4gIGlmIChlcnJvcnMubGVuZ3RoID4gMCkge1xuICAgIHRocm93IG5ldyBGaXJlYmFzZUVycm9yKGVycm9ycy5qb2luKCcsICcpLCAnSU5WQUxJRF9EQVRBJywgNDAwKTtcbiAgfVxufTtcblxuLy8gRnVuY3Rpb24gdG8gZ2V0IHN0b3JpZXMgZm9yIHRoZSBjdXJyZW50IHVzZXJcbmV4cG9ydCBjb25zdCBnZXRTdG9yaWVzID0gYXN5bmMgKCkgPT4ge1xuICByZXR1cm4gd2l0aFJldHJ5KGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlciA9IGF1dGguY3VycmVudFVzZXI7XG4gICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpcmViYXNlRXJyb3IoJ1VzZXIgbXVzdCBiZSBhdXRoZW50aWNhdGVkIHRvIGZldGNoIHN0b3JpZXMnLCAnVU5BVVRIRU5USUNBVEVEJywgNDAxKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcSA9IHF1ZXJ5KFxuICAgICAgICBzdG9yaWVzQ29sbGVjdGlvbixcbiAgICAgICAgd2hlcmUoJ3VzZXJJZCcsICc9PScsIHVzZXIudWlkKSxcbiAgICAgICAgb3JkZXJCeSgnY3JlYXRlZEF0JywgJ2Rlc2MnKVxuICAgICAgKTtcblxuICAgICAgY29uc3QgcXVlcnlTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG4gICAgICByZXR1cm4gcXVlcnlTbmFwc2hvdC5kb2NzLm1hcChkb2MgPT4gKHtcbiAgICAgICAgaWQ6IGRvYy5pZCxcbiAgICAgICAgLi4uZG9jLmRhdGEoKVxuICAgICAgfSkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dFcnJvcignZ2V0U3RvcmllcycsIGVycm9yLCB7IHVzZXJJZDogYXV0aC5jdXJyZW50VXNlcj8udWlkIH0pO1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvcikge1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBGaXJlYmFzZUVycm9yKFxuICAgICAgICAnRmFpbGVkIHRvIGZldGNoIHN0b3JpZXMuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJyxcbiAgICAgICAgJ0ZFVENIX0VSUk9SJyxcbiAgICAgICAgNTAwXG4gICAgICApO1xuICAgIH1cbiAgfSk7XG59O1xuXG4vLyBDaGVjayBpZiBTdG9yaWVzIGNvbGxlY3Rpb24gZXhpc3RzIGFuZCBjcmVhdGUgaXQgaWYgaXQgZG9lc24ndFxuZXhwb3J0IGNvbnN0IGVuc3VyZVN0b3JpZXNDb2xsZWN0aW9uID0gYXN5bmMgKCkgPT4ge1xuICB0cnkge1xuICAgIC8vIFRyeSB0byBnZXQgYSBkb2N1bWVudCBmcm9tIHRoZSBjb2xsZWN0aW9uXG4gICAgY29uc3QgcSA9IHF1ZXJ5KHN0b3JpZXNDb2xsZWN0aW9uLCBsaW1pdCgxKSk7XG4gICAgY29uc3QgcXVlcnlTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG4gICAgXG4gICAgaWYgKCFxdWVyeVNuYXBzaG90LmVtcHR5KSB7XG4gICAgICBjb25zb2xlLmxvZygnU3RvcmllcyBjb2xsZWN0aW9uIGV4aXN0cycpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gSWYgY29sbGVjdGlvbiBpcyBlbXB0eSwgY3JlYXRlIGEgZHVtbXkgZG9jdW1lbnQgdG8gZW5zdXJlIGNvbGxlY3Rpb24gZXhpc3RzXG4gICAgY29uc3QgZHVtbXlEb2MgPSB7XG4gICAgICB0aXRsZTogJ0R1bW15IFN0b3J5JyxcbiAgICAgIGNvbnRlbnQ6ICdUaGlzIGlzIGEgZHVtbXkgc3RvcnkgdG8gaW5pdGlhbGl6ZSB0aGUgY29sbGVjdGlvbicsXG4gICAgICBjb25maWc6IHtcbiAgICAgICAgZm9jdXM6ICdkdW1teScsXG4gICAgICAgIHRvbmU6ICdkdW1teScsXG4gICAgICAgIGZvcm1hdDogJ2R1bW15JyxcbiAgICAgICAgbGVuZ3RoOiAnZHVtbXknXG4gICAgICB9LFxuICAgICAgdXNlcklkOiAnc3lzdGVtJyxcbiAgICAgIHN0YXR1czogJ2NvbXBsZXRlZCcgYXMgY29uc3QsXG4gICAgICBjcmVhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxuICAgICAgdXBkYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSxcbiAgICAgIGdlbmVyYXRpb25BdHRlbXB0czogMCxcbiAgICAgIGxhc3RBdHRlbXB0QXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxuICAgICAgc3RvcnlTdHlsZTogJ2R1bW15JyxcbiAgICAgIGFjU3R5bGU6ICdkdW1teSdcbiAgICB9O1xuXG4gICAgYXdhaXQgYWRkRG9jKHN0b3JpZXNDb2xsZWN0aW9uLCBkdW1teURvYyk7XG4gICAgY29uc29sZS5sb2coJ1N0b3JpZXMgY29sbGVjdGlvbiBjcmVhdGVkJyk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY2hlY2tpbmcvY3JlYXRpbmcgU3RvcmllcyBjb2xsZWN0aW9uOicsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRmlyZWJhc2VFcnJvcihcbiAgICAgICdGYWlsZWQgdG8gaW5pdGlhbGl6ZSBTdG9yaWVzIGNvbGxlY3Rpb24nLFxuICAgICAgJ0lOSVRfRVJST1InLFxuICAgICAgNTAwXG4gICAgKTtcbiAgfVxufTtcblxuLy8gVXBkYXRlIHNhdmVTdG9yeSB0byBlbnN1cmUgY29sbGVjdGlvbiBleGlzdHNcbmV4cG9ydCBjb25zdCBzYXZlU3RvcnkgPSBhc3luYyAoc3Rvcnk6IE9taXQ8U3RvcnksICdpZCcgfCAnY3JlYXRlZEF0Jz4pOiBQcm9taXNlPHN0cmluZz4gPT4ge1xuICByZXR1cm4gd2l0aFJldHJ5KGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlciA9IGF1dGguY3VycmVudFVzZXI7XG4gICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEZpcmViYXNlRXJyb3IoJ1VzZXIgbXVzdCBiZSBhdXRoZW50aWNhdGVkIHRvIHNhdmUgc3RvcmllcycsICdVTkFVVEhFTlRJQ0FURUQnLCA0MDEpO1xuICAgICAgfVxuXG4gICAgICAvLyBFbnN1cmUgU3RvcmllcyBjb2xsZWN0aW9uIGV4aXN0c1xuICAgICAgYXdhaXQgZW5zdXJlU3Rvcmllc0NvbGxlY3Rpb24oKTtcblxuICAgICAgdmFsaWRhdGVTdG9yeShzdG9yeSk7XG5cbiAgICAgIGNvbnN0IHN0b3J5RGF0YSA9IHtcbiAgICAgICAgLi4uc3RvcnksXG4gICAgICAgIHVzZXJJZDogdXNlci51aWQsXG4gICAgICAgIGNyZWF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksXG4gICAgICAgIHVwZGF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksXG4gICAgICAgIHN0YXR1czogJ2NvbXBsZXRlZCcgYXMgY29uc3QsXG4gICAgICAgIGdlbmVyYXRpb25BdHRlbXB0czogMCxcbiAgICAgICAgbGFzdEF0dGVtcHRBdDogc2VydmVyVGltZXN0YW1wKClcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGNvbnN0IGRvY1JlZiA9IGF3YWl0IGFkZERvYyhzdG9yaWVzQ29sbGVjdGlvbiwgc3RvcnlEYXRhKTtcbiAgICAgIHJldHVybiBkb2NSZWYuaWQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxvZ0Vycm9yKCdzYXZlU3RvcnknLCBlcnJvciwgeyBcbiAgICAgICAgdXNlcklkOiBhdXRoLmN1cnJlbnRVc2VyPy51aWQsXG4gICAgICAgIHN0b3J5VGl0bGU6IHN0b3J5LnRpdGxlLFxuICAgICAgICBzdG9yeUNvbmZpZzogc3RvcnkuY29uZmlnXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgaWYgKCdjb2RlJyBpbiBlcnJvcikge1xuICAgICAgICAgIGNvbnN0IGZpcmViYXNlRXJyb3IgPSBlcnJvciBhcyB7IGNvZGU6IHN0cmluZzsgbWVzc2FnZTogc3RyaW5nIH07XG4gICAgICAgICAgc3dpdGNoIChmaXJlYmFzZUVycm9yLmNvZGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ3Blcm1pc3Npb24tZGVuaWVkJzpcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmViYXNlRXJyb3IoJ1Blcm1pc3Npb24gZGVuaWVkLiBQbGVhc2UgY2hlY2sgeW91ciBhdXRoZW50aWNhdGlvbiBzdGF0dXMuJywgJ1BFUk1JU1NJT05fREVOSUVEJywgNDAzKTtcbiAgICAgICAgICAgIGNhc2UgJ3VuYXV0aGVudGljYXRlZCc6XG4gICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlYmFzZUVycm9yKCdQbGVhc2Ugc2lnbiBpbiB0byBzYXZlIHN0b3JpZXMuJywgJ1VOQVVUSEVOVElDQVRFRCcsIDQwMSk7XG4gICAgICAgICAgICBjYXNlICdpbnZhbGlkLWFyZ3VtZW50JzpcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpcmViYXNlRXJyb3IoJ0ludmFsaWQgc3RvcnkgZGF0YSBwcm92aWRlZC4nLCAnSU5WQUxJRF9EQVRBJywgNDAwKTtcbiAgICAgICAgICAgIGNhc2UgJ2ZhaWxlZC1wcmVjb25kaXRpb24nOlxuICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZWJhc2VFcnJvcignT3BlcmF0aW9uIGZhaWxlZC4gUGxlYXNlIHRyeSBhZ2Fpbi4nLCAnRkFJTEVEX1BSRUNPTkRJVElPTicsIDQwMCk7XG4gICAgICAgICAgICBjYXNlICd1bmF2YWlsYWJsZSc6XG4gICAgICAgICAgICAgIHRocm93IG5ldyBGaXJlYmFzZUVycm9yKCdTZXJ2aWNlIHRlbXBvcmFyaWx5IHVuYXZhaWxhYmxlLiBQbGVhc2UgdHJ5IGFnYWluLicsICdVTkFWQUlMQUJMRScsIDUwMyk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICB0aHJvdyBuZXcgRmlyZWJhc2VFcnJvcignRmFpbGVkIHRvIHNhdmUgc3RvcnkuIFBsZWFzZSB0cnkgYWdhaW4uJywgJ1NBVkVfRVJST1InLCA1MDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICB0aHJvdyBuZXcgRmlyZWJhc2VFcnJvcihcbiAgICAgICAgJ0ZhaWxlZCB0byBzYXZlIHN0b3J5LiBQbGVhc2UgdHJ5IGFnYWluLicsXG4gICAgICAgICdTQVZFX0VSUk9SJyxcbiAgICAgICAgNTAwXG4gICAgICApO1xuICAgIH1cbiAgfSk7XG59O1xuXG4vLyBGdW5jdGlvbiB0byB1cGRhdGUgYSBzdG9yeVxuZXhwb3J0IGNvbnN0IHVwZGF0ZVN0b3J5ID0gYXN5bmMgKHN0b3J5SWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxPbWl0PFN0b3J5LCAnaWQnIHwgJ2NyZWF0ZWRBdCcgfCAndXNlcklkJz4+KSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXNlciA9IGF1dGguY3VycmVudFVzZXI7XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICB0aHJvdyBuZXcgRmlyZWJhc2VFcnJvcignVXNlciBtdXN0IGJlIGF1dGhlbnRpY2F0ZWQgdG8gdXBkYXRlIHN0b3JpZXMnLCAnVU5BVVRIRU5USUNBVEVEJywgNDAxKTtcbiAgICB9XG5cbiAgICAvLyBHZXQgdGhlIGV4aXN0aW5nIHN0b3J5IHRvIHZlcmlmeSBvd25lcnNoaXBcbiAgICBjb25zdCBzdG9yeVJlZiA9IGRvYyhkYiwgJ3N0b3JpZXMnLCBzdG9yeUlkKTtcbiAgICBjb25zdCBzdG9yeVNuYXAgPSBhd2FpdCBnZXREb2Moc3RvcnlSZWYpO1xuXG4gICAgaWYgKCFzdG9yeVNuYXAuZXhpc3RzKCkpIHtcbiAgICAgIHRocm93IG5ldyBGaXJlYmFzZUVycm9yKCdTdG9yeSBub3QgZm91bmQnLCAnTk9UX0ZPVU5EJywgNDA0KTtcbiAgICB9XG5cbiAgICBjb25zdCBzdG9yeURhdGEgPSBzdG9yeVNuYXAuZGF0YSgpIGFzIFN0b3J5O1xuICAgIGlmIChzdG9yeURhdGEudXNlcklkICE9PSB1c2VyLnVpZCkge1xuICAgICAgdGhyb3cgbmV3IEZpcmViYXNlRXJyb3IoJ1VuYXV0aG9yaXplZCB0byB1cGRhdGUgdGhpcyBzdG9yeScsICdVTkFVVEhPUklaRUQnLCA0MDMpO1xuICAgIH1cblxuICAgIC8vIFZhbGlkYXRlIHRoZSB1cGRhdGVkIGRhdGFcbiAgICBjb25zdCB1cGRhdGVkU3RvcnkgPSB7IC4uLnN0b3J5RGF0YSwgLi4udXBkYXRlcyB9O1xuICAgIHZhbGlkYXRlU3RvcnkodXBkYXRlZFN0b3J5KTtcblxuICAgIC8vIFVwZGF0ZSB0aGUgc3RvcnlcbiAgICBhd2FpdCB1cGRhdGVEb2Moc3RvcnlSZWYsIHtcbiAgICAgIC4uLnVwZGF0ZXMsXG4gICAgICB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHN0b3J5SWQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvcikge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHN0b3J5OicsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRmlyZWJhc2VFcnJvcihcbiAgICAgICdGYWlsZWQgdG8gdXBkYXRlIHN0b3J5JyxcbiAgICAgICdVUERBVEVfRVJST1InLFxuICAgICAgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiAnY29kZScgaW4gZXJyb3IgPyA1MDAgOiA1MDBcbiAgICApO1xuICB9XG59O1xuXG4vLyBGdW5jdGlvbiB0byBnZXQgYSBzaW5nbGUgc3RvcnlcbmV4cG9ydCBjb25zdCBnZXRTdG9yeSA9IGFzeW5jIChzdG9yeUlkOiBzdHJpbmcpOiBQcm9taXNlPFN0b3J5IHwgbnVsbD4gPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHVzZXIgPSBhdXRoLmN1cnJlbnRVc2VyO1xuICAgIGlmICghdXNlcikge1xuICAgICAgdGhyb3cgbmV3IEZpcmViYXNlRXJyb3IoJ1VzZXIgbXVzdCBiZSBhdXRoZW50aWNhdGVkIHRvIGdldCBzdG9yaWVzJywgJ1VOQVVUSEVOVElDQVRFRCcsIDQwMSk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RvcnlEb2MgPSBhd2FpdCBnZXREb2MoZG9jKGRiLCAnc3RvcmllcycsIHN0b3J5SWQpKTtcbiAgICBpZiAoIXN0b3J5RG9jLmV4aXN0cygpKSB7XG4gICAgICB0aHJvdyBuZXcgRmlyZWJhc2VFcnJvcignU3Rvcnkgbm90IGZvdW5kJywgJ05PVF9GT1VORCcsIDQwNCk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RvcnlEYXRhID0gc3RvcnlEb2MuZGF0YSgpIGFzIFN0b3J5O1xuICAgIGlmIChzdG9yeURhdGEudXNlcklkICE9PSB1c2VyLnVpZCkge1xuICAgICAgdGhyb3cgbmV3IEZpcmViYXNlRXJyb3IoJ1VuYXV0aG9yaXplZCB0byBhY2Nlc3MgdGhpcyBzdG9yeScsICdVTkFVVEhPUklaRUQnLCA0MDMpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBpZDogc3RvcnlEb2MuaWQsXG4gICAgICAuLi5zdG9yeURhdGFcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IpIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHN0b3J5OicsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRmlyZWJhc2VFcnJvcihcbiAgICAgICdGYWlsZWQgdG8gZ2V0IHN0b3J5JyxcbiAgICAgICdGRVRDSF9FUlJPUicsXG4gICAgICBlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmICdjb2RlJyBpbiBlcnJvciA/IDUwMCA6IDUwMFxuICAgICk7XG4gIH1cbn07XG5cbi8vIEFkZCBuZXcgZXJyb3IgdHlwZXMgZm9yIHN0b3J5IGdlbmVyYXRpb25cbmV4cG9ydCBpbnRlcmZhY2UgU3RvcnlHZW5lcmF0aW9uRXJyb3Ige1xuICBjb2RlOiBzdHJpbmc7XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgZGV0YWlscz86IGFueTtcbiAgdGltZXN0YW1wOiBEYXRlO1xuICByZXRyeUNvdW50PzogbnVtYmVyO1xufVxuXG4vLyBGdW5jdGlvbiB0byBjcmVhdGUgYSBzdG9yeSB3aXRoIGluaXRpYWwgc3RhdHVzIGFuZCBlcnJvciB0cmFja2luZ1xuZXhwb3J0IGNvbnN0IGNyZWF0ZVN0b3J5V2l0aFN0YXR1cyA9IGFzeW5jIChcbiAgc3Rvcnk6IE9taXQ8U3RvcnksICdpZCcgfCAnY3JlYXRlZEF0JyB8ICdzdGF0dXMnPixcbiAgc3RhdHVzOiAnaW5fcHJvZ3Jlc3MnIHwgJ2ZhaWxlZCcgPSAnaW5fcHJvZ3Jlc3MnLFxuICBlcnJvcj86IFN0b3J5R2VuZXJhdGlvbkVycm9yXG4pID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB1c2VyID0gYXV0aC5jdXJyZW50VXNlcjtcbiAgICBpZiAoIXVzZXIpIHtcbiAgICAgIHRocm93IG5ldyBGaXJlYmFzZUVycm9yKCdVc2VyIG11c3QgYmUgYXV0aGVudGljYXRlZCB0byBjcmVhdGUgc3RvcmllcycsICdVTkFVVEhFTlRJQ0FURUQnLCA0MDEpO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSBpbml0aWFsIHN0b3J5IGRvY3VtZW50IHdpdGggZXJyb3IgdHJhY2tpbmdcbiAgICBjb25zdCBkb2NSZWYgPSBhd2FpdCBhZGREb2Moc3Rvcmllc0NvbGxlY3Rpb24sIHtcbiAgICAgIC4uLnN0b3J5LFxuICAgICAgdXNlcklkOiB1c2VyLnVpZCxcbiAgICAgIHN0YXR1cyxcbiAgICAgIGNyZWF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksXG4gICAgICBlcnJvcjogZXJyb3IgPyB7XG4gICAgICAgIC4uLmVycm9yLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfSA6IG51bGwsXG4gICAgICBnZW5lcmF0aW9uQXR0ZW1wdHM6IDAsXG4gICAgICBsYXN0QXR0ZW1wdEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGRvY1JlZi5pZDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yKSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgc3Rvcnk6JywgZXJyb3IpO1xuICAgIHRocm93IG5ldyBGaXJlYmFzZUVycm9yKFxuICAgICAgJ0ZhaWxlZCB0byBjcmVhdGUgc3RvcnknLFxuICAgICAgJ0NSRUFURV9FUlJPUicsXG4gICAgICBlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmICdjb2RlJyBpbiBlcnJvciA/IDUwMCA6IDUwMFxuICAgICk7XG4gIH1cbn07XG5cbi8vIEZ1bmN0aW9uIHRvIHVwZGF0ZSBzdG9yeSBnZW5lcmF0aW9uIHN0YXR1cyB3aXRoIGRldGFpbGVkIGVycm9yIHRyYWNraW5nXG5leHBvcnQgY29uc3QgdXBkYXRlU3RvcnlTdGF0dXMgPSBhc3luYyAoXG4gIHN0b3J5SWQ6IHN0cmluZyxcbiAgc3RhdHVzOiAnY29tcGxldGVkJyB8ICdpbl9wcm9ncmVzcycgfCAnZmFpbGVkJyxcbiAgZXJyb3I/OiBTdG9yeUdlbmVyYXRpb25FcnJvclxuKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXNlciA9IGF1dGguY3VycmVudFVzZXI7XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICB0aHJvdyBuZXcgRmlyZWJhc2VFcnJvcignVXNlciBtdXN0IGJlIGF1dGhlbnRpY2F0ZWQgdG8gdXBkYXRlIHN0b3J5IHN0YXR1cycsICdVTkFVVEhFTlRJQ0FURUQnLCA0MDEpO1xuICAgIH1cblxuICAgIGNvbnN0IHN0b3J5UmVmID0gZG9jKGRiLCAnc3RvcmllcycsIHN0b3J5SWQpO1xuICAgIGNvbnN0IHN0b3J5U25hcCA9IGF3YWl0IGdldERvYyhzdG9yeVJlZik7XG5cbiAgICBpZiAoIXN0b3J5U25hcC5leGlzdHMoKSkge1xuICAgICAgdGhyb3cgbmV3IEZpcmViYXNlRXJyb3IoJ1N0b3J5IG5vdCBmb3VuZCcsICdOT1RfRk9VTkQnLCA0MDQpO1xuICAgIH1cblxuICAgIGNvbnN0IHN0b3J5RGF0YSA9IHN0b3J5U25hcC5kYXRhKCkgYXMgU3Rvcnk7XG4gICAgaWYgKHN0b3J5RGF0YS51c2VySWQgIT09IHVzZXIudWlkKSB7XG4gICAgICB0aHJvdyBuZXcgRmlyZWJhc2VFcnJvcignVW5hdXRob3JpemVkIHRvIHVwZGF0ZSB0aGlzIHN0b3J5JywgJ1VOQVVUSE9SSVpFRCcsIDQwMyk7XG4gICAgfVxuXG4gICAgY29uc3QgdXBkYXRlczogYW55ID0ge1xuICAgICAgc3RhdHVzLFxuICAgICAgdXBkYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSxcbiAgICAgIGxhc3RBdHRlbXB0QXQ6IHNlcnZlclRpbWVzdGFtcCgpXG4gICAgfTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgdXBkYXRlcy5lcnJvciA9IHtcbiAgICAgICAgLi4uZXJyb3IsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9O1xuICAgICAgdXBkYXRlcy5nZW5lcmF0aW9uQXR0ZW1wdHMgPSAoc3RvcnlEYXRhLmdlbmVyYXRpb25BdHRlbXB0cyB8fCAwKSArIDE7XG4gICAgfVxuXG4gICAgYXdhaXQgdXBkYXRlRG9jKHN0b3J5UmVmLCB1cGRhdGVzKTtcbiAgICByZXR1cm4gc3RvcnlJZDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yKSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgc3Rvcnkgc3RhdHVzOicsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRmlyZWJhc2VFcnJvcihcbiAgICAgICdGYWlsZWQgdG8gdXBkYXRlIHN0b3J5IHN0YXR1cycsXG4gICAgICAnVVBEQVRFX0VSUk9SJyxcbiAgICAgIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgJ2NvZGUnIGluIGVycm9yID8gNTAwIDogNTAwXG4gICAgKTtcbiAgfVxufTtcblxuLy8gRnVuY3Rpb24gdG8gZ2V0IHN0b3J5IGdlbmVyYXRpb24gc3RhdHVzXG5leHBvcnQgY29uc3QgZ2V0U3RvcnlHZW5lcmF0aW9uU3RhdHVzID0gYXN5bmMgKHN0b3J5SWQ6IHN0cmluZykgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHVzZXIgPSBhdXRoLmN1cnJlbnRVc2VyO1xuICAgIGlmICghdXNlcikge1xuICAgICAgdGhyb3cgbmV3IEZpcmViYXNlRXJyb3IoJ1VzZXIgbXVzdCBiZSBhdXRoZW50aWNhdGVkIHRvIGdldCBzdG9yeSBzdGF0dXMnLCAnVU5BVVRIRU5USUNBVEVEJywgNDAxKTtcbiAgICB9XG5cbiAgICBjb25zdCBkb2NSZWYgPSBkb2MoZGIsICdzdG9yaWVzJywgc3RvcnlJZCk7XG4gICAgY29uc3QgZG9jU25hcCA9IGF3YWl0IGdldERvYyhkb2NSZWYpO1xuXG4gICAgaWYgKCFkb2NTbmFwLmV4aXN0cygpKSB7XG4gICAgICB0aHJvdyBuZXcgRmlyZWJhc2VFcnJvcignU3Rvcnkgbm90IGZvdW5kJywgJ05PVF9GT1VORCcsIDQwNCk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RvcnlEYXRhID0gZG9jU25hcC5kYXRhKCkgYXMgU3Rvcnk7XG4gICAgaWYgKHN0b3J5RGF0YS51c2VySWQgIT09IHVzZXIudWlkKSB7XG4gICAgICB0aHJvdyBuZXcgRmlyZWJhc2VFcnJvcignVW5hdXRob3JpemVkIHRvIGFjY2VzcyB0aGlzIHN0b3J5JywgJ1VOQVVUSE9SSVpFRCcsIDQwMyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogc3RvcnlEYXRhLnN0YXR1cyxcbiAgICAgIGVycm9yOiBzdG9yeURhdGEuZXJyb3IsXG4gICAgICBnZW5lcmF0aW9uQXR0ZW1wdHM6IHN0b3J5RGF0YS5nZW5lcmF0aW9uQXR0ZW1wdHMgfHwgMCxcbiAgICAgIGxhc3RBdHRlbXB0QXQ6IHN0b3J5RGF0YS5sYXN0QXR0ZW1wdEF0XG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yKSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBzdG9yeSBzdGF0dXM6JywgZXJyb3IpO1xuICAgIHRocm93IG5ldyBGaXJlYmFzZUVycm9yKFxuICAgICAgJ0ZhaWxlZCB0byBnZXQgc3Rvcnkgc3RhdHVzJyxcbiAgICAgICdGRVRDSF9FUlJPUicsXG4gICAgICBlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmICdjb2RlJyBpbiBlcnJvciA/IDUwMCA6IDUwMFxuICAgICk7XG4gIH1cbn07XG5cbi8vIEJhdGNoIG9wZXJhdGlvbnNcbmV4cG9ydCBjb25zdCBiYXRjaFNhdmVTdG9yaWVzID0gYXN5bmMgKHN0b3JpZXM6IE9taXQ8U3RvcnksICdpZCcgfCAnY3JlYXRlZEF0Jz5bXSk6IFByb21pc2U8c3RyaW5nW10+ID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBiYXRjaCA9IHdyaXRlQmF0Y2goZGIpO1xuICAgIGNvbnN0IHN0b3J5SWRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgc3Rvcmllcy5mb3JFYWNoKHN0b3J5ID0+IHtcbiAgICAgIHZhbGlkYXRlU3Rvcnkoc3RvcnkpO1xuICAgICAgY29uc3Qgc3RvcnlSZWYgPSBkb2MoY29sbGVjdGlvbihkYiwgJ3N0b3JpZXMnKSk7XG4gICAgICBiYXRjaC5zZXQoc3RvcnlSZWYsIHtcbiAgICAgICAgLi4uc3RvcnksXG4gICAgICAgIGNyZWF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksXG4gICAgICAgIHN0YXR1czogJ2NvbXBsZXRlZCcgYXMgY29uc3RcbiAgICAgIH0pO1xuICAgICAgc3RvcnlJZHMucHVzaChzdG9yeVJlZi5pZCk7XG4gICAgfSk7XG5cbiAgICBhd2FpdCBiYXRjaC5jb21taXQoKTtcbiAgICByZXR1cm4gc3RvcnlJZHM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgYmF0Y2ggc2F2aW5nIHN0b3JpZXM6JywgZXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGJhdGNoIHNhdmUgc3RvcmllcycpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgYmF0Y2hEZWxldGVTdG9yaWVzID0gYXN5bmMgKHN0b3J5SWRzOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4gPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGJhdGNoID0gd3JpdGVCYXRjaChkYik7XG4gICAgXG4gICAgc3RvcnlJZHMuZm9yRWFjaChpZCA9PiB7XG4gICAgICBjb25zdCBzdG9yeVJlZiA9IGRvYyhkYiwgJ3N0b3JpZXMnLCBpZCk7XG4gICAgICBiYXRjaC5kZWxldGUoc3RvcnlSZWYpO1xuICAgIH0pO1xuXG4gICAgYXdhaXQgYmF0Y2guY29tbWl0KCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgYmF0Y2ggZGVsZXRpbmcgc3RvcmllczonLCBlcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gYmF0Y2ggZGVsZXRlIHN0b3JpZXMnKTtcbiAgfVxufTtcblxuLy8gUGFnaW5hdGlvbiBzdXBwb3J0XG5leHBvcnQgY29uc3QgZ2V0U3Rvcmllc1BhZ2luYXRlZCA9IGFzeW5jIChcbiAgdXNlcklkOiBzdHJpbmcsXG4gIHBhZ2VTaXplOiBudW1iZXIgPSAxMCxcbiAgbGFzdERvYz86IERvY3VtZW50U25hcHNob3Rcbik6IFByb21pc2U8eyBzdG9yaWVzOiBTdG9yeVtdOyBsYXN0RG9jOiBEb2N1bWVudFNuYXBzaG90IHwgbnVsbCB9PiA9PiB7XG4gIHRyeSB7XG4gICAgbGV0IHEgPSBxdWVyeShcbiAgICAgIGNvbGxlY3Rpb24oZGIsICdzdG9yaWVzJyksXG4gICAgICB3aGVyZSgndXNlcklkJywgJz09JywgdXNlcklkKSxcbiAgICAgIG9yZGVyQnkoJ2NyZWF0ZWRBdCcsICdkZXNjJyksXG4gICAgICBsaW1pdChwYWdlU2l6ZSlcbiAgICApO1xuXG4gICAgaWYgKGxhc3REb2MpIHtcbiAgICAgIHEgPSBxdWVyeShxLCBzdGFydEFmdGVyKGxhc3REb2MpKTtcbiAgICB9XG5cbiAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgICBjb25zdCBzdG9yaWVzID0gcXVlcnlTbmFwc2hvdC5kb2NzLm1hcChkb2MgPT4gKHtcbiAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAuLi5kb2MuZGF0YSgpXG4gICAgfSBhcyBTdG9yeSkpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN0b3JpZXMsXG4gICAgICBsYXN0RG9jOiBxdWVyeVNuYXBzaG90LmRvY3NbcXVlcnlTbmFwc2hvdC5kb2NzLmxlbmd0aCAtIDFdIHx8IG51bGxcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgcGFnaW5hdGVkIHN0b3JpZXM6JywgZXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGdldCBwYWdpbmF0ZWQgc3RvcmllcycpO1xuICB9XG59O1xuXG4vLyBTZWFyY2ggc3Rvcmllc1xuZXhwb3J0IGNvbnN0IHNlYXJjaFN0b3JpZXMgPSBhc3luYyAoXG4gIHVzZXJJZDogc3RyaW5nLFxuICBzZWFyY2hUZXJtOiBzdHJpbmdcbik6IFByb21pc2U8U3RvcnlbXT4gPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHN0b3JpZXNRdWVyeSA9IHF1ZXJ5KFxuICAgICAgY29sbGVjdGlvbihkYiwgJ3N0b3JpZXMnKSxcbiAgICAgIHdoZXJlKCd1c2VySWQnLCAnPT0nLCB1c2VySWQpLFxuICAgICAgb3JkZXJCeSgnY3JlYXRlZEF0JywgJ2Rlc2MnKVxuICAgICk7XG4gICAgXG4gICAgY29uc3QgcXVlcnlTbmFwc2hvdCA9IGF3YWl0IGdldERvY3Moc3Rvcmllc1F1ZXJ5KTtcbiAgICBjb25zdCBzdG9yaWVzID0gcXVlcnlTbmFwc2hvdC5kb2NzLm1hcChkb2MgPT4gKHtcbiAgICAgIGlkOiBkb2MuaWQsXG4gICAgICAuLi5kb2MuZGF0YSgpXG4gICAgfSBhcyBTdG9yeSkpO1xuXG4gICAgLy8gQ2xpZW50LXNpZGUgc2VhcmNoIGZvciBiZXR0ZXIgZmxleGliaWxpdHlcbiAgICByZXR1cm4gc3Rvcmllcy5maWx0ZXIoc3RvcnkgPT4gXG4gICAgICBzdG9yeS50aXRsZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFRlcm0udG9Mb3dlckNhc2UoKSkgfHxcbiAgICAgIHN0b3J5LmNvbnRlbnQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hUZXJtLnRvTG93ZXJDYXNlKCkpIHx8XG4gICAgICBzdG9yeS5jb25maWcuZm9jdXMudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hUZXJtLnRvTG93ZXJDYXNlKCkpIHx8XG4gICAgICBzdG9yeS5jb25maWcudG9uZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFRlcm0udG9Mb3dlckNhc2UoKSlcbiAgICApO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNlYXJjaGluZyBzdG9yaWVzOicsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBzZWFyY2ggc3RvcmllcycpO1xuICB9XG59O1xuXG4vLyBTdG9yeSBzdGF0aXN0aWNzXG5leHBvcnQgY29uc3QgZ2V0U3RvcnlTdGF0cyA9IGFzeW5jICh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8e1xuICB0b3RhbDogbnVtYmVyO1xuICBjb21wbGV0ZWQ6IG51bWJlcjtcbiAgaW5Qcm9ncmVzczogbnVtYmVyO1xuICBmYWlsZWQ6IG51bWJlcjtcbiAgYnlGb2N1czogUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcbiAgYnlUb25lOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+O1xufT4gPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHN0b3JpZXNRdWVyeSA9IHF1ZXJ5KFxuICAgICAgY29sbGVjdGlvbihkYiwgJ3N0b3JpZXMnKSxcbiAgICAgIHdoZXJlKCd1c2VySWQnLCAnPT0nLCB1c2VySWQpXG4gICAgKTtcbiAgICBcbiAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhzdG9yaWVzUXVlcnkpO1xuICAgIGNvbnN0IHN0b3JpZXMgPSBxdWVyeVNuYXBzaG90LmRvY3MubWFwKGRvYyA9PiBkb2MuZGF0YSgpIGFzIFN0b3J5KTtcblxuICAgIGNvbnN0IHN0YXRzID0ge1xuICAgICAgdG90YWw6IHN0b3JpZXMubGVuZ3RoLFxuICAgICAgY29tcGxldGVkOiAwLFxuICAgICAgaW5Qcm9ncmVzczogMCxcbiAgICAgIGZhaWxlZDogMCxcbiAgICAgIGJ5Rm9jdXM6IHt9IGFzIFJlY29yZDxzdHJpbmcsIG51bWJlcj4sXG4gICAgICBieVRvbmU6IHt9IGFzIFJlY29yZDxzdHJpbmcsIG51bWJlcj5cbiAgICB9O1xuXG4gICAgc3Rvcmllcy5mb3JFYWNoKHN0b3J5ID0+IHtcbiAgICAgIC8vIENvdW50IGJ5IHN0YXR1c1xuICAgICAgc3RhdHNbc3Rvcnkuc3RhdHVzXSsrO1xuICAgICAgXG4gICAgICAvLyBDb3VudCBieSBmb2N1c1xuICAgICAgc3RhdHMuYnlGb2N1c1tzdG9yeS5jb25maWcuZm9jdXNdID0gKHN0YXRzLmJ5Rm9jdXNbc3RvcnkuY29uZmlnLmZvY3VzXSB8fCAwKSArIDE7XG4gICAgICBcbiAgICAgIC8vIENvdW50IGJ5IHRvbmVcbiAgICAgIHN0YXRzLmJ5VG9uZVtzdG9yeS5jb25maWcudG9uZV0gPSAoc3RhdHMuYnlUb25lW3N0b3J5LmNvbmZpZy50b25lXSB8fCAwKSArIDE7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gc3RhdHM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBzdG9yeSBzdGF0czonLCBlcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZ2V0IHN0b3J5IHN0YXRpc3RpY3MnKTtcbiAgfVxufTtcblxuZXhwb3J0IHsgYXBwLCBhdXRoLCBkYiwgYW5hbHl0aWNzIH07ICJdLCJuYW1lcyI6WyJpbml0aWFsaXplQXBwIiwiZ2V0QXBwcyIsImdldEFwcCIsImdldEF1dGgiLCJnZXRGaXJlc3RvcmUiLCJjb2xsZWN0aW9uIiwiYWRkRG9jIiwic2VydmVyVGltZXN0YW1wIiwicXVlcnkiLCJ3aGVyZSIsIm9yZGVyQnkiLCJnZXREb2NzIiwiZG9jIiwiZ2V0RG9jIiwidXBkYXRlRG9jIiwid3JpdGVCYXRjaCIsImxpbWl0Iiwic3RhcnRBZnRlciIsIm9uU25hcHNob3QiLCJlbmFibGVJbmRleGVkRGJQZXJzaXN0ZW5jZSIsImdldEFuYWx5dGljcyIsImNvbnNvbGUiLCJsb2ciLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfRklSRUJBU0VfQVBJX0tFWSIsImF1dGhEb21haW4iLCJORVhUX1BVQkxJQ19GSVJFQkFTRV9BVVRIX0RPTUFJTiIsInByb2plY3RJZCIsIk5FWFRfUFVCTElDX0ZJUkVCQVNFX1BST0pFQ1RfSUQiLCJzdG9yYWdlQnVja2V0IiwiTkVYVF9QVUJMSUNfRklSRUJBU0VfU1RPUkFHRV9CVUNLRVQiLCJtZXNzYWdpbmdTZW5kZXJJZCIsIk5FWFRfUFVCTElDX0ZJUkVCQVNFX01FU1NBR0lOR19TRU5ERVJfSUQiLCJhcHBJZCIsIk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FQUF9JRCIsIm1lYXN1cmVtZW50SWQiLCJORVhUX1BVQkxJQ19GSVJFQkFTRV9NRUFTVVJFTUVOVF9JRCIsImZpcmViYXNlQ29uZmlnIiwiaXNDb25uZWN0ZWQiLCJhcHAiLCJsZW5ndGgiLCJhdXRoIiwiZGIiLCJjYXRjaCIsImVyciIsImNvZGUiLCJ3YXJuIiwiY29ubmVjdGlvblJlZiIsImVycm9yIiwiY2hlY2tDb25uZWN0aW9uIiwid2l0aFJldHJ5Iiwib3BlcmF0aW9uIiwibWF4UmV0cmllcyIsImRlbGF5IiwibGFzdEVycm9yIiwiYXR0ZW1wdCIsIkVycm9yIiwiYmFja29mZkRlbGF5IiwiTWF0aCIsInBvdyIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImxvZ0Vycm9yIiwiY29udGV4dCIsImVycm9yRGV0YWlscyIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsIm5hbWUiLCJtZXNzYWdlIiwic3RhY2siLCJ1bmRlZmluZWQiLCJjb25uZWN0aW9uU3RhdHVzIiwiYW5hbHl0aWNzIiwic3Rvcmllc0NvbGxlY3Rpb24iLCJGaXJlYmFzZUVycm9yIiwiY29uc3RydWN0b3IiLCJzdGF0dXMiLCJ2YWxpZGF0ZVN0b3J5Iiwic3RvcnkiLCJlcnJvcnMiLCJ0aXRsZSIsInRyaW0iLCJwdXNoIiwiY29udGVudCIsInVzZXJJZCIsImNvbmZpZyIsImZvY3VzIiwidG9uZSIsImZvcm1hdCIsImluY2x1ZGVzIiwiam9pbiIsImdldFN0b3JpZXMiLCJ1c2VyIiwiY3VycmVudFVzZXIiLCJxIiwidWlkIiwicXVlcnlTbmFwc2hvdCIsImRvY3MiLCJtYXAiLCJpZCIsImRhdGEiLCJlbnN1cmVTdG9yaWVzQ29sbGVjdGlvbiIsImVtcHR5IiwiZHVtbXlEb2MiLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJnZW5lcmF0aW9uQXR0ZW1wdHMiLCJsYXN0QXR0ZW1wdEF0Iiwic3RvcnlTdHlsZSIsImFjU3R5bGUiLCJzYXZlU3RvcnkiLCJzdG9yeURhdGEiLCJkb2NSZWYiLCJzdG9yeVRpdGxlIiwic3RvcnlDb25maWciLCJmaXJlYmFzZUVycm9yIiwidXBkYXRlU3RvcnkiLCJzdG9yeUlkIiwidXBkYXRlcyIsInN0b3J5UmVmIiwic3RvcnlTbmFwIiwiZXhpc3RzIiwidXBkYXRlZFN0b3J5IiwiZ2V0U3RvcnkiLCJzdG9yeURvYyIsImNyZWF0ZVN0b3J5V2l0aFN0YXR1cyIsInVwZGF0ZVN0b3J5U3RhdHVzIiwiZ2V0U3RvcnlHZW5lcmF0aW9uU3RhdHVzIiwiZG9jU25hcCIsImJhdGNoU2F2ZVN0b3JpZXMiLCJzdG9yaWVzIiwiYmF0Y2giLCJzdG9yeUlkcyIsImZvckVhY2giLCJzZXQiLCJjb21taXQiLCJiYXRjaERlbGV0ZVN0b3JpZXMiLCJkZWxldGUiLCJnZXRTdG9yaWVzUGFnaW5hdGVkIiwicGFnZVNpemUiLCJsYXN0RG9jIiwic2VhcmNoU3RvcmllcyIsInNlYXJjaFRlcm0iLCJzdG9yaWVzUXVlcnkiLCJmaWx0ZXIiLCJ0b0xvd2VyQ2FzZSIsImdldFN0b3J5U3RhdHMiLCJzdGF0cyIsInRvdGFsIiwiY29tcGxldGVkIiwiaW5Qcm9ncmVzcyIsImZhaWxlZCIsImJ5Rm9jdXMiLCJieVRvbmUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/firebase.ts\n"));

/***/ })

});